## 问题分析

对比 User 和 Agent 气泡的布局：

**Agent 气泡**（第 1039 行）：
```python
content_col.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Preferred)
```

**User 气泡**（第 971-972 行）：
```python
content_wrapper = QWidget()
cw_layout = QVBoxLayout(content_wrapper)
```
User 气泡的 `content_wrapper` 没有设置大小策略！

这可能导致第一次创建时，`content_wrapper` 默认的大小策略让它占据过多空间。当 AI 回复后，布局重新计算，可能触发了正确的尺寸。

## 解决方案

为 User 气泡的 `content_wrapper` 添加大小策略：
```python
content_wrapper.setSizePolicy(QSizePolicy.Preferred, QSizePolicy.Preferred)
```

或者使用 `Maximum` 策略限制其大小。

## 修改内容

为 `content_wrapper` 设置合适的大小策略。