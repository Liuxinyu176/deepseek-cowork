# DeepSeek Cowork - 产品文档

## 1. 产品概述 (Product Overview)

### 1.1 背景
在日常工作中，用户经常需要处理各种文件操作（如批量重命名、数据格式转换、日志分析、Excel 数据提取等）。这些任务往往可以通过编写简短的脚本（Python/Node.js）来完成，但对于非技术用户或希望提高效率的开发者来说，手动编写代码耗时且门槛较高。

### 1.2 目标
面向不会编程的普通用户和希望提效的开发者，提供一款基于 DeepSeek 推理模型的跨平台桌面应用（Windows / macOS），通过自然语言对话完成本地文件处理，并在可视化界面中提供安全可控、可回溯、可复用的自动化能力。

### 1.3 核心价值
*   **低门槛**：无需编程知识，自然语言即可驱动复杂操作。
*   **高效率**：一次对话完成“思考 → 生成代码 → 执行”，替代重复性手工劳动。
*   **安全可控**：工作区沙箱、自定义安全模式、操作摘要卡和撤销能力，降低误操作风险。
*   **可复用**：支持将复杂操作固化为「常用操作模板」，下次一键复用。
*   **可扩展**：通过 Skills / MCP 功能中心扩展新能力，支持导入或关闭功能模块。
*   **跨平台**：基于 PySide6 (Qt for Python)，在 Windows 和 macOS 上提供一致体验。

---

## 2. 功能特性 (Features)

### 2.1 核心功能

1.  **对话式文件助手 (Chat-based File Assistant)**
    *   在单一聊天窗口中，用自然语言描述文件任务（例如：“把这个文件夹下所有 .jpg 图片转换为 .png 格式”）。
    *   支持多轮对话，补充细节、修改条件、追加新需求。
    *   **实时控制**：支持随时**暂停**和**停止** AI 的执行，防止陷入死循环或误操作。

2.  **多会话管理与聊天记录回溯**
    *   通过会话列表管理不同任务（如「整理相册」「重命名合同」「备份日志」）。
    *   每个会话自动保存聊天记录，可随时切换和继续。
    *   支持按时间线回溯、按关键词搜索历史指令。

3.  **智能代码生成与自动化文件处理**
    *   基于 DeepSeek 推理模型规划完整解决方案，一次性生成 Python 脚本。
    *   **读取**：支持文本、表格（Excel/CSV）、图片等常见格式。
    *   **操作**：重命名、移动、复制、删除、内容提取、格式转换、数据清洗等。
    *   **写入**：生成新的文件或修改现有文件，并在日志中提供结果路径。

4.  **安全执行沙箱与可视化操作摘要**
    *   所有操作严格限制在用户选定的工作区目录内，避免访问系统敏感区域。
    *   在执行前通过「操作摘要卡」展示将要执行的动作统计。
    *   对删除、大批量修改等高风险操作弹出二次确认弹窗，文案采用白话提示。

5.  **AI 自我学习与常用操作模板**
    *   对复杂但高复用的操作，支持在执行完成后将整套做法保存为「常用操作模板」。
    *   **智能过滤**：AI 仅为可重用的算法或系统操作创建技能，对于文本总结等一次性任务直接输出结果。

6.  **Skills / MCP 功能中心**
    *   通过统一的「功能中心」面板展示所有可用功能模块。
    *   **分页展示**：自动区分「已安装的功能模块」和「AI 生成的技能」，方便管理。
    *   每个模块显示名称、中文说明（如可用）、安全等级和启用状态，支持一键启用/禁用。
    *   面向非技术用户提供「从本地导入功能包」入口，方便加载别人提供的技能包。

7.  **可配置的安全监管模式 (规划中)**
    *   提供多档安全模式（如保守/标准/高级）。
    *   支持用户自定义规则：禁止删除某些类型文件、保护特定文件夹。
    *   将被拦截的危险操作记录在「安全日志」中。

---

## 3. 用户使用流程 (User Flow)

1.  **首次配置**
    *   启动应用后，选择要操作的文件夹（工作区）。
    *   填写 DeepSeek API Key。
    *   在「功能中心」确认所需技能已启用。

2.  **描述需求**
    *   在底部输入框中用自然语言描述任务，例如「把这个文件夹里所有 .txt 改成 .md」。

3.  **AI 思考与方案生成**
    *   DeepSeek 在后台进行推理，生成完整的处理方案。
    *   **右侧侧边栏**实时展示「深度思考」过程，让用户了解 AI 的决策路径。
    *   **中央聊天区**仅展示最终的简洁回复，避免信息过载。

4.  **任务执行与监控**
    *   系统在本地受控环境中执行脚本。
    *   用户可随时点击底部的「暂停」或「停止」按钮干预执行。

5.  **结果回顾与复用**
    *   任务完成后，用户可在会话历史中查看结果。
    *   对于有价值的通用操作，AI 可能会建议将其保存为新技能，出现在「功能中心」的「AI 生成的技能」标签页中。

---

## 4. 技术架构 (Technical Architecture)

### 4.1 技术栈（当前实现）
*   **桌面端 GUI**：PySide6 (Qt for Python)，单一代码库支持 Windows / macOS。
*   **LLM 接口**：DeepSeek 推理模型（通过兼容 OpenAI 的 Python SDK 调用）。
*   **核心逻辑**：纯 Python 实现，包含 Agent、SkillManager、ConfigManager、执行器等模块。
*   **打包方式**：通过 PyInstaller 打包为独立可执行文件，用户无需额外安装 Python。
