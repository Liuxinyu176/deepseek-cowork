# Smart File Assistant GUI V2.0 交互优化计划

> 目标：让不会编程的普通用户，在 **Windows / macOS** 上，都能像使用普通桌面软件一样，自然地完成文件处理任务，而不需要理解「工作区」「技能」「LLM」这些概念。

---

## 1. 总体设计目标

- 降低上手门槛：首次打开应用时，用户不看文档也能完成「选择文件夹 → 输入一句话 → 得到结果」。
- 减少心理负担：弱化 AI/代码细节，强调“安全、可撤销、看得懂”的操作提示。
- 跨平台一致：在 Windows / macOS 上，核心交互布局保持一致，只做少量视觉差异适配。
- 面向非程序员：所有文案避免技术术语，用「文件夹」「改名字」「复制/备份」等日常表达。

---

## 2. 信息架构 V2.0（整体框架）

V2.0 建议将主界面分为 4 个明显区域，并用简单文字标注：

1. 顶部：**步骤指引条**
   - 显示「① 选择文件夹 → ② 连接到 DeepSeek → ③ 描述你的需求 → ④ 查看并确认操作」。
   - 当前未完成的步骤高亮，用简单中文提示。

2. 左侧：**任务与文件区（可选）**
   - 最近使用的文件夹列表（点击快速切换）。
   - 最近执行的任务列表（如「批量重命名」「备份图片」），方便复用。

3. 中间：**对话区 + 操作摘要**
   - 保留现在的聊天气泡，但增加「摘要卡片」：
     - 例如：「准备重命名 32 个文件」「将创建 backup 文件夹并移动 120 张图片」。
     - 摘要用大号字体 + 图标，让非技术用户一眼看懂“要干什么”。

4. 底部：**输入与控制区**
   - 左侧：自然语言输入框（保持“按回车发送”）。
   - 右侧：清晰的按钮：**发送 / 暂停 / 停止 / 撤销上一步**。
   - 另加一个「示例指令」按钮，方便用户直接点选。

---

## 3. 首次使用体验优化（Onboarding）

### 3.1 首次启动引导弹窗

- 检测到没有配置 API Key 或未选择工作区时，自动显示一个简单向导（最多 3 步）：
  1. 「选择要操作的文件夹」（按钮：选择文件夹）。
  2. 「输入或粘贴你的 DeepSeek Key」（按钮：打开设置）。
  3. 「试试这些示例指令」：列出 2~3 个适合小白的例子。
- 每一步都配图标 + 简短句子，不出现“LLM、MCP、CoT”等术语。

### 3.2 示例指令库

- 在输入框右侧增加「示例」按钮，点击后弹出列表：
  - 「把这个文件夹里所有 .txt 改成 .md」
  - 「帮我把图片按日期分类到不同文件夹」
  - 「找出文件名里包含 '备份' 的文件并列出来」
- 用户点击某个示例，自动填入输入框，可以再修改后发送。

### 3.3 关键设置的简单解释

- 在设置页面中：
  - 「DeepSeek API Key」下方加一句说明：「用来连接 AI 服务，没有它就无法理解你的指令」。
  - 「技能（Skills）」区域改为更易懂的名称，比如「可用功能模块」，勾选时显示提示：
    - 如：「file-system：允许修改文件和文件夹」「python-runner：允许运行简单的 Python 脚本」。

---

## 4. 聊天与结果展示体验

### 4.1 聊天气泡简化

- 继续保留当前的 User / Agent 气泡样式，但对于小白用户：
  - 文案优化：Agent 的回复尽量拆成列表，而不是长段落。
  - 在结果前增加简要总结句：「我计划这样做：」。

### 4.2 思考过程（Thinking）默认隐藏

- 继续保留「👁️ 查看思考过程」按钮，但：
  - 文案改为：「查看详细过程（可选）」。
  - 鼠标悬停时提示：「这里是给高级用户看的详细分析内容，普通使用可以忽略」。
  - 对非程序员来说，避免产生“看不懂=自己很笨”的挫败感。

### 4.3 操作摘要卡片

- 在每次准备执行实际文件操作前，自动生成一张「操作摘要卡」插入到对话区中：
  - 标题：「准备进行这些操作」。
  - 内容：按类型统计，如：
    - 「重命名文件：32 个」
    - 「移动文件：120 个 → backup 文件夹」
    - 「删除文件：0 个」
  - 下方有两个按钮：「确认执行」「取消」。
- 对于非程序员用户，只要读懂这张卡片，就能做出是否继续的决定。

---

## 5. 安全与可撤销体验

### 5.1 危险操作的强化确认

- 对于删除、覆盖、批量修改等操作：
  - 弹窗标题：改为「请再次确认」。
  - 内容使用白话描述，如：
    - 「你将删除 120 个文件，删除后将无法在回收站中找回。」
  - 选项按钮文字：使用「是的，继续」「先不要」而不是「Yes / No」。

### 5.2 简单的“撤销上一步”能力（V2.0 计划阶段）

- 在 V2.0 中规划：对常见操作（重命名/移动/新建文件夹）记录一份「变更清单」：
  - 例如：从 `a.txt` → `a_old.txt`，就记录下来，以便后续可以「撤销重命名」。
- 在界面底部增加一个「撤销上一步」按钮：
  - 悬停提示：「尝试把刚才做过的文件操作恢复回来」。
  - 若无法撤销（跨多步或涉及删除），则给出明确提示，不要静默失败。

---

## 6. Windows / macOS 跨平台友好性

### 6.1 文件选择与路径展示

- 使用系统原生的文件夹选择对话框（当前已通过 Qt 实现，无需用户关心路径格式）。
- 在界面上展示简化路径，例如：
  - Windows：只显示 `D:\工作\图片整理`。
  - macOS：显示 `Macintosh HD > Users > Alice > Pictures`。
- 鼠标悬停时可显示完整路径，满足少量高级用户需求。

### 6.2 文案与图标统一

- 按钮文案统一中英文混杂问题，例如：
  - 「⚙️ 设置」保持不变。
  - 「📂 选择工作区」改为「📂 选择文件夹」对非程序员更友好。
  - 「执行日志」可以改为「运行记录」。
- 图标统一采用常见的桌面软件图标约定：
  - ▶️ 开始 / 继续
  - ⏸️ 暂停
  - ⏹️ 停止
  - ⏮️ 撤销（可以考虑使用「↩️」图标）。

### 6.3 字体与大小

- 默认使用系统标准字体（Windows 使用 Segoe UI，macOS 使用 San Francisco / 系统默认）。
- 重要文本（操作摘要、警告）字体略大 1~2 号。
- 保证在 13 英寸笔记本上也能清晰阅读。

### 6.4 视觉基调（参考 Apple Human Interface Guidelines）

- 整体氛围：
  - 清爽、安静、克制，不使用花哨配色和复杂纹理。
  - 优先使用浅色背景 + 适度阴影区分区域，避免生硬边框。
- 布局与留白：
  - 以大块留白和明确的对齐为主，让内容「呼吸」，减少元素堆叠。
  - 主要操作按钮与摘要卡保持一致的左右边距和圆角半径。
- 颜色与层次：
  - 主色：接近 macOS 系统蓝（可用于主要按钮、高亮步骤、链接和选中状态）。
  - 辅色：柔和的灰度背景，用于分隔区域和弱化信息。
  - 警告与危险操作使用接近系统红色，但不要大面积铺色，只用在图标和少量文字上。
- 圆角与阴影：
  - 卡片、对话气泡、弹窗采用统一圆角（例如 8–12px 的视觉效果）。
  - 阴影轻且柔和，主要用于悬浮弹窗和前景层，避免重度投影。
- 动效与反馈：
  - 所有状态变化（展开/折叠、切换会话、弹出提示）采用简短、自然的过渡动画。
  - 避免过度动画，仅在有助于理解关系和层级时使用（例如从会话列表切换到某个会话时轻微淡入）。

---

## 7. 交互细节优化（针对小白用户的易用性）

### 7.1 输入体验

- 输入框中预置示例 placeholder：
  - 如：「例如：把这个文件夹里的图片按日期分类」。
- 当用户输入内容后，如果检测到句子不完整（很短，例如只输入「重命名」）：
  - 引导补全：「你可以这样说：把所有 .txt 文件改成 .md」。

### 7.2 状态反馈

- 当后台 LLM 处理中时：
  - 在发送按钮旁增加旋转小图标 + 文案：「正在思考，请稍等…」。
  - 禁用再次发送，避免频繁点击导致混乱。
- 当执行文件操作时：
  - 在日志区域用浅显的文字说明当前步骤，如：
    - 「正在扫描当前文件夹…」
    - 「准备重命名 32 个文件…」
    - 「重命名完成！」。

### 7.3 错误提示友好化

- 将报错信息转换成用户能理解的话：
  - 例如 API Key 错误：
    - 「DeepSeek 返回了错误，请检查你的 Key 是否填写正确或是否还有额度。」
  - 文件权限错误：
    - 「没有权限修改这个文件，请尝试以管理员身份运行，或将文件复制到其他文件夹后再试。」。

---

## 8. 帮助与指南入口

- 在主界面右上角增加「? 帮助」按钮：
  - 点击后弹出一个简单帮助对话框，包含：
    - 《一分钟快速开始》
    - 《常见问题：Key、权限、误删怎么办》
    - 《进阶技巧：如何写出更好的指令》
- 所有帮助内容都用最少的专业词，配图标和示例句。

---

## 9. AI 自我迭代能力规划

> 这一部分的目标：让 AI 能够「自己总结经验、提出改进建议」，但整个过程始终在用户可理解、可控制的范围内，不会“偷偷改东西”。

### 9.1 面向小白的“自我学习”概念设计

- 用通俗说法替代专业名词：
  - 把「自我迭代」解释为：「记住做过的事，下次可以做得更好」。
  - 把「技能」解释为：「它学会的一种固定操作方法」。
- 在界面中增加一个「让助手记住这次做法」的开关：
  - 放在操作摘要卡片下面，文案类似：
    - 「这次的做法挺不错，下次遇到类似问题可以直接用」
  - 默认关闭，只有用户勾选时，才会进入“学习 / 存档”流程。

### 9.2 自我迭代的基本流程（产品视角）

1. 用户提出需求并执行了一次任务（例如复杂的重命名规则）。
2. 任务完成后，界面提示：
   - 「这次操作比较复杂，要不要把这套做法保存下来，方便下次一键使用？」
3. 如果用户选择「是」：
   - 弹出一个简单命名对话框：
     - 「给这套做法起个名字（例如：‘相册整理模板’）」。
   - AI 会自动生成一段简短说明，用户可以修改：
     - 「这个操作会：扫描当前文件夹里的图片，按拍摄日期放到不同子文件夹」。
4. 保存后：
   - 在左侧「任务与文件区」新增一个「我的常用操作」列表。
   - 小白用户只需点一下「相册整理模板」，再确认操作摘要即可重复使用。

### 9.3 自我迭代的边界与节奏

- 避免 AI 频繁打扰：
  - 只有当一次操作「涉及多步文件修改」或「用户花了较久时间交互」时才提示是否保存为模板。
  - 为用户提供一个总开关：「不再提醒我保存为模板」。
- 不直接暴露代码：
  - 对非程序员用户，不展示具体代码，只展示「它会做什么」的自然语言描述。
  - 高级用户（可通过设置开启）可以查看和编辑对应的脚本或“技能定义”。

---

## 10. 可自定义的监管者安全限制

> 目标：用尽量简单的方式，让普通用户也能“设定底线”，告诉助手哪些事绝对不能做、哪些事必须先问过我。

### 10.1 安全模式等级（预设方案）

- 在设置中增加「安全模式」选项，采用简单的等级描述：
  - **保守模式（推荐给大多数用户）**
    - 不允许删除文件。
    - 不允许移动到工作区之外。
    - 批量修改超过 50 个文件时必须二次确认。
  - **标准模式**
    - 允许删除文件，但所有删除都需要明确确认。
    - 允许批量重命名 / 移动文件。
  - **高级模式（需手动开启）**
    - 默认允许更多操作，但仍会在大规模变更前显示清晰的摘要和确认框。
- 每种模式下方都用 2~3 行白话解释，不出现技术术语。

### 10.2 自定义规则（简化版）

- 在设置界面提供一个「自定义限制」区域，用非常直白的选项组装规则：
  - 「禁止删除以下类型的文件」：复选框（图片 / 文档 / 视频 / 其他）。
  - 「禁止修改这些文件夹里的内容」：允许用户选择一个或多个文件夹作为“只读区域”。
  - 「当一次操作影响的文件数量超过 X 个时，必须让我确认」：X 可通过滑块设置，例如 10 / 50 / 100。
- 对于每条规则，都在旁边用一句话解释其效果，让非技术用户也能理解。

### 10.3 监管者视角的“操作记录”

- 在「运行记录」区域增加一类特殊条目，用图标标识为「安全日志」：
  - 例如：「已阻止删除 3 个受保护文件」「已拒绝访问只读文件夹 D:\重要资料」。
- 当规则触发时，界面给出友好提示：
  - 「根据你的安全设置，我阻止了这次删除操作。如果你确认需要删除，可以暂时调整设置后再试。」。
- 提供简单的筛选：
  - 允许用户在记录中只看「刚才发生了什么」「最近 10 分钟」之类的人话筛选选项。

### 10.4 面向高级用户的扩展空间（仅规划，不必暴露给小白）

- 在设计层面预留一个「高级规则」入口（可以隐藏在设置中的“高级”折叠区域）：
  - 未来可以允许用更灵活的方式描述规则（例如基于通配符、文件属性）。
  - 但在 V2.0 的首个版本中，对普通用户只提供勾选式、自然语言说明的选项。

---

## 11. Skills / MCP 可视化与管理

> 目标：把现在「看不见摸不着」的 skills / MCP 变成看得见、点得到的「功能列表」，让用户知道助手当前会什么、正在用什么，还可以在不写代码的前提下新增或关闭某些功能。

### 11.1 功能中心总览（Skills / MCP 面板）

- 在主界面增加一个「功能中心」入口（可以在顶部导航或侧边栏）：
  - 进入后展示一个清单，把所有可用的功能模块列出来：
    - 本地技能（来自 `skills/` 目录，如 `file-system`、`python-runner` 等）。
    - 远程 MCP 服务（如果有，通过网络提供的工具）。
  - 每个功能以卡片/列表项展示：
    - 名称（人类可读，比如「文件操作助手」「Python 脚本执行」）。
    - 简介（从 SKILL.md 或配置中提取的一两句话描述）。
    - 来源（本地 / 远程）。
    - 当前状态（启用 / 禁用），用开关按钮切换。

### 11.2 会话中的功能可视化

- 在每个对话里，让用户知道「这次对话用了哪些功能」：
  - 在对话区域顶部或右侧增加「本次使用的功能」小标签区域：
    - 例如：「文件操作」「Python 运行」「归档 / 备份」等标签。
  - 当某个技能被调用时，短暂显示提示：
    - 「已使用：文件操作助手（只在你选择的文件夹内生效）」。
- 如果某个技能被安全规则拦截（例如删除被禁止），在这里也可以显示：
  - 「已阻止：删除操作（根据你的安全设置）」。

### 11.3 简单的新增功能入口（面向小白的版本）

- 在「功能中心」里提供一个「新增功能」按钮，面向不会编程的用户：
  - 允许用户「从本地导入功能包」：
    - 引导用户选择一个包含 SKILL.md 的文件夹。
    - 系统负责将其复制/注册到 `skills/` 目录，并在列表中显示。
  - 文案说明要非常直白：
    - 「如果你从别人那里拿到一个新的‘功能包’，可以在这里导入，让助手学会新的本领。」
- 同时保留给高级用户的扩展说明：
  - 在帮助或高级区提示：
    - 「你也可以自己开发功能包，写好 SKILL.md 和 impl.py 后，通过这里导入」。

### 11.4 Skills / MCP 与安全策略的结合

- 在功能中心中，直接展示每个功能对应的安全级别：
  - 例如：「文件删除：受安全模式限制」「网络访问：高风险，默认关闭」。
- 允许用户为单个功能设置额外限制（勾选式）：
  - 「使用前总是询问我」。
  - 「只在某些文件夹里允许使用」。
- 当用户在安全设置界面调整规则时，可以看到是哪几个功能会受到影响，避免产生「我改了设置却不知道影响了什么」的困惑。

---

## 12. 聊天记录回溯与查看

> 目标：让用户可以像看聊天软件一样，方便地翻看、搜索和复用历史对话，而不需要去找 json 文件，更不需要懂任何技术细节。

### 11.1 会话视图（按「对话」组织，而不是按文件）

- 在界面左侧或顶部增加「会话列表」区域，每一条代表一次独立对话：
  - 每个会话显示：
    - 会话标题（如用户首条指令的前 10〜15 个字）。
    - 最近一次交互时间（例如「今天 10:23」「昨天」）。
    - 简短标签（如「重命名文件」「整理图片」「备份」）。
- 用户可以：
  - 点击某个会话，立即恢复当时的聊天记录和上下文。
  - 点击「新对话」按钮，清空当前聊天区，开始一轮新的任务。

### 11.2 聊天记录时间线回溯

- 在当前会话中，为用户提供更友好的回溯方式：
  - 在对话区右上角增加「时间线」入口：
    - 展示一个按时间分段的视图，例如：「今天」「昨天」「本周」。
  - 用户点击某个时间段，可以快速跳转到当时的消息位置。
- 也可以在对话区顶部提供简单的「跳转」控件：
  - 「跳到本次对话开头」
  - 「跳到上一次执行文件操作的位置」

### 11.3 关键操作节点标记

- 对于每次真正执行文件操作的节点（不是纯聊天），在时间线上做标记：
  - 例如在旁边显示一个小图标：「📝 重命名」「📁 移动」「🗑 删除（需更谨慎）」。
  - 用户点击标记，可以直接跳到那条消息以及对应的操作摘要卡。
- 这有助于用户快速回忆「刚才什么时候动过文件」「那次批量改名之前我说了什么」。

### 11.4 历史搜索与复用（对小白友好的版本）

- 在会话列表上方增加一个简单的搜索框：
  - 用户可以输入关键词（如「备份」「相册」），系统在所有历史会话的用户指令中搜索。
  - 搜索结果以列表展示：
    - 显示匹配的那条指令 + 所在会话 + 时间。
  - 点击后，直接跳入对应会话，并高亮那条指令。
- 在聊天气泡的右上角放一个小菜单（三点）：
  - 「复制这条指令到新对话」
  - 「标记为常用指令」
  - 方便用户把已经验证有效的需求，快速带到新的场景里使用。

### 11.5 聊天记录导出与隐私

- 为非程序员提供一个一键导出的方式：
  - 在设置或会话列表里增加「导出这次对话」按钮：
    - 导出为普通文本或 Markdown 文件，方便用户留存或与他人分享。
- 隐私提示：
  - 导出前弹出简单说明：「导出的文件可能包含路径、文件名等敏感信息，请妥善保管」。

---

## 13. V2.0 实施阶段划分（给开发用）

- **阶段 1：文案与布局微调**
  - 修改按钮文字（“工作区”→“文件夹” 等）。
  - 增加步骤指引条（无需改动底层逻辑）。
  - 增加示例指令按钮（静态列表即可）。

- **阶段 2：操作摘要卡 & 安全确认升级**
  - 在执行前生成操作摘要卡。
  - 二次确认弹窗统一改为友好文案。

- **阶段 3：撤销能力基础支持**
  - 为重命名 / 移动 / 新建文件夹记录变更日志。
  - 实现「撤销上一步」按钮（支持简单场景）。

- **阶段 4：AI 自我迭代与模板化功能**
  - 支持将一次复杂操作保存为「常用操作模板」。
  - 在对话结束后引导用户选择是否保存，并提供命名与说明编辑。

- **阶段 5：Skills / MCP 可视化与管理**
  - 实现功能中心面板，展示所有本地技能与远程 MCP。
  - 支持启用 / 禁用开关，并在会话中展示已使用的功能标签。
  - 支持从本地导入技能包的基础流程。

- **阶段 6：可配置安全监管与安全日志**
  - 引入安全模式等级（保守 / 标准 / 高级）。
  - 支持勾选式自定义限制（禁止删除类型、保护文件夹、文件数量阈值）。
  - 在运行记录中增加安全日志与可视化提示。

- **阶段 7：帮助与 Onboarding 优化**
  - 首次启动向导。
  - 帮助按钮与简易 FAQ。

> 上述计划专门针对「不会编程的普通用户」设计，同时预留了 AI 自我迭代、Skills / MCP 管理以及可配置安全监管的空间。建议在开发前先通过几轮用户访谈或可用性测试验证文案和流程，再进入实际开发阶段。

